{{ define "main" }}
<article>
    {{ .Content }}
    {{ $mainSections := .Site.Params.mainSections | default (slice "posts") }}
    {{/* Create a variable with that section to use in multiple places. */}}
    {{ $section := where .Site.RegularPages "Section" "in" $mainSections }}
    {{/* Check to see if the section is defined for ranging through it */}}
    {{ $section_count := len $section }}

    {{ $n_posts := $.Param "recent_posts_number" | default 3 }}

    {{ range (first $n_posts $section) }}
    <div>
        {{ partial "post-summary.html" . }}
    </div>
    {{ end }}

</article>
{{ end}}
