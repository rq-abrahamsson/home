{{ define "main" }}
<article class="main-content">
    <div class="main-description">
        {{ .Content }}
    </div>
    {{ $mainSections := .Site.Params.mainSections | default (slice "posts") }}
    {{/* Create a variable with that section to use in multiple places. */}}
    {{ $section := where .Site.RegularPages "Section" "in" $mainSections }}
    {{/* Check to see if the section is defined for ranging through it */}}
    {{ $section_count := len $section }}

    {{ $n_posts := $.Param "recent_posts_number" | default 3 }}

    {{ range $section }}
    {{ partial "post-summary.html" . }}
    {{ end }}

</article>
{{ end}}
